<html>
<head>
</head>
<script>
	function ArrayDim2(_row,_col) {
		let obj = {
			row: _row,
			col: _col,
			buffer: new Array(_row * _col),
            copyfrom: (obj2) =>{
                obj.row=obj2.row
                obj.col=obj2.col
                for(let i=0;i<obj.row*obj.col;i++){
                    obj.buffer[i]=obj2.buffer[i];
                }
                return obj
            },
			at: (i,j) =>{
				return obj.buffer[j*obj.row +i];
	        },
    	  	set: (i,j,v) =>{
				obj.buffer[j*obj.row +i] = v;
	  		},
		}
		return obj
	}
    function Block(){
        let obj = ArrayDim2(3,3)
        obj.init = function(s){
            if(s.length!=3){
                return null 
            }
            let table = [ [0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1] ]
            for(let j=0;j<3;j++){
                let num = parseInt(s[j])
                if(0 <= num && num <= 7){
                    for(let i=0;i<3;i++){
                        obj.set(i,j,table[num][i])
                    }
                }else{
                    return obj;
                }
            }
            return obj
        }
        return obj
    }
    function Board(){
        let obj = ArrayDim2(9,9)
        obj.init = function(){
            obj.buffer.fill(1)
            for(let i=2;i<7;i++){
                for(let j=2;j<7;j++){
                    obj.set(i,j,0)
                }
            }
            return obj
        }
        obj.IsCanPlace = function(block,x,y){
            if(x < 0 || x > 6 || y < 0 || y > 6) { return false }
            for(let i=0;i<3;i++){
                for(let j=0;j<3;j++){
                    if(block.at(i,j) == 1 && obj.at(x+i,y+j) == 1){
                        return false
                    }
                }
            }
            return true
        }
        obj.Place = function(block,x,y){
            if(x < 0 || x > 6 || y < 0 || y > 6) { return false }
            for(let i=0;i<3;i++){
                for(let j=0;j<3;j++){
                    obj.set(x+i,y+j,block.at(i,j))
                }
            }
            return obj
        }
        return obj
    }
	function btnadd()
	{
        debugger
        const aa = Block().init('715')
        const aa2 = Block().copyfrom(aa)
        const bb = Board().init()
        const bb2 = Board().copyfrom(bb)
        let debug = 1
	}
</script>
<body>
增加： <input id="input_add" type="text" size="30" value='' />
<button id="btn_add" onclick=btnadd()>增加</button><br/><br/>
<canvas id="myCanvas" width="200" height="100" style="border:1px solid #000000;">
您的浏览器不支持 HTML5 canvas 标签。
</canvas>
</body>
</html>
